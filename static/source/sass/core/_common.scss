// Capo common styles


// ------------ IMPORTS ---------------//
@import '_reset.scss';                       // defines reset and core styles
@import '_mixins.scss';                      // defines mixins
@import '_layout.scss';                      // layouts
@import '../assets/_all_assets.scss';        // pull in asset helpers

html {background: $base $texture;}
body {
  font-family: $base_font;     // root font stack. Baseline grid is defined in reset
  color:       $inverse;
  height:100%;
  @include trans(all, .2s, ease-in);
}

select,input,textarea {color:$inverse_alt}

a {color:$accent_alt;
  &:link{-webkit-tap-highlight-color:$accent_alt}
  &:hover {color:$accent}
}
h1, h2, h3 {font-weight:normal}

::-moz-selection { background: $inverse_alt; color:$base_alt }
::selection      { background: $inverse_alt; color:$base_alt }




/**************************** Structure ******************************/
.constrain { margin: 0 auto;
  @include breakpoint(s) { width: ($s - 20) + px };
  @include breakpoint(m) { width: ($m - 40) + px };
  @include breakpoint(l) { width: ($l - 40) + px };
  @include breakpoint(xl) { width: ($xl - 40) + px };
}

body.collapsed {
  #masthead { @include box-shadow(0, 2px, 2px, .4); position: fixed; z-index:1000;
    hgroup h2 { display: none }
    #main_menu { @include breakpoint(xs) { display: none }; 
      ul { 
        @include breakpoint(s) { display: none }; 
      }
    }
  }
}

// regular masthead styles.
#masthead { @include box-shadow(0, 2px, 2px, .3);
  top:0; 
  width:100%; 
  z-index:100; 
  padding: 10px 0; 
  min-height:60px;
  border-bottom:2px solid $accent; 
  @include gradient($accent, 10%, $texture); 

  hgroup, nav { display:inline-block }
  
  hgroup { color: $base; 
    text-shadow: 0 1px 2px rgba(0,0,0,.7); 
    padding-right:$gutter_width;
    width:29%;

    @include breakpoint(xs) {
      padding-left:$gutter_width;
    }
    a { color: $base }
  }

  > div #menu-trigger {
    float:right; 
    padding:.5em 1.5em; 
    font-weight: bold; 
    @include radius(5px);
    border:1px inset $accent; 
    color: $base; 
    font-size:75%;
    margin-right: $gutter_width;

    &.activated { background: $accent_alt }
  }
  nav {
    position:relative; font-size:95%;

    @include breakpoint(s) {width:70%;};

    #main_menu {
      @include breakpoint(xs) {display:none;};
      > li { padding:.25em 1.33em .125em 0; font-weight:bold;
        //@include breakpoint(l) { width: 12%; }
        ul { margin-bottom:1em; font-weight:normal; font-size:95%;
          li { line-height: 1em; padding: .25em 0; }
        }
      }
      a {color: $base_alt }
    }
  }
}

#content {
  text-shadow: 1px 1px 2px $base;

  figure {
    img {border:1px solid $accent_alt;}
  
    figcaption { font-size:80%; padding-bottom:.5em; color:$inverse_alt; font-weight:normal;
      .author { display:block; text-align:right; font:9px $base_font; 
        text-transform: uppercase; 
        margin: -1.5em .5em 0 0; 
      }
      p {margin: 0}
    }
  }

  div[role=main] {padding-bottom:1em;
    p, ul, ol, dl, table {margin-bottom:1em}
  }
}

#footer {clear:both; 
  h3 {clear:both; padding-top:.5em;}
  > div {margin:0 .5em}
  > div > p {text-align:right; display:block}
}

#searchForm {
  text-align:right;
  select {width:120px;}
  #q {border:1px solid $inverse_alt;
  @include radius(3px);
  padding:3px;
  margin-right:-8px;
  width:140px;
  font-size:13px;
  }
  button {border:0; padding:4px 5px; margin:0; font-size:13px; text-transform: uppercase; 
    @include gradient($base_alt, 10);
  }  
  span {font-size:10px; color:$inverse_alt}
}



/************************ COMMON CLASSES AND ELEMENTS ********************/
time {
  color:$inverse_alt; 
  font-size:80%; 
  display:block;
}



.block {display:block}

.breakout { // WTF is breakout??
  display: block;
  border: 1px solid lighten($base_alt2, 2%);
  @include radius(.5em);
  background: $base_alt2;
  padding: 1em;
  margin: 1em 0;
  font-size: 150%;
  text-shadow: 0 1px 2px rgba(0,0,0,.8); 
}

.counter {
  background: rgba($base, 0.9);
  border: 1px solid $base_alt2;
  @include radius(1.5em);
  padding: .5em;
  text-align: center;
  font-size: 70%;
  display: inline-block;
  min-width: 2.5em;
  font-weight: normal;
  color: $inverse_alt;
}
.avatar {
      width: 80px;
      display: block;
      border:1px solid $base_alt2;
}
a .avatar:hover {border-color: $accent}

/********************* CONTENT SECTION FRONTS *****************************/
#top_stories_hold {
  a {color:$inverse}
  a:hover, a:active {color:$accent_alt}
  
  #lead_item { 
    @include breakpoint(s) {
       figure.vertical {width:57%;
        figcaption {display: none}
      }
      figure {float:right; margin:0 0 1em $gutter_width}
    }
    @include breakpoint(l) {
      width:450px; float:left;
      p {font-size:105%}
    }
    @include breakpoint(xl) {
      width:700px;
    }
  } 
    article+article { border-top:2px solid $base_alt; margin-top:1em;
      h1, p { font-weight:normal; font-size:100%}
      h1 {font-size:1.5em}
      p {font-size:100%}
      //figure {width:180px !important}
    }

  #more_featured {
    h1 {font-size:1.25em}
    p {font-size:90%;}
    img {width:110px}

    @include breakpoint(s) {
      article { display:inline-block; padding:.5em 10px 0 0; 
        border-top:1px solid $inverse_alt; width:49.5%; vertical-align:top; 
      }
    }
     @include breakpoint(l) {
      width:300px; float:right;
      article {display:block; width:auto; padding-right:0; clear:right}
      article:first-child {border:0}
    }
  }
}
#more_articles {
    h1 {font-size:1.5em}
  }


/**************************** STORY PAGES  *********************************/
p.vcard {line-height:1em}
p.author {font-weight:bold; font-size:80%; margin:0; text-transform: uppercase}
p.source-org {font-family:$alt_font; font-size:75%}

h2.overline {font-size:1.33em; margin-bottom:0}
h2.overline + h1 {margin-top:.125em}

.sociallinks {
  border: solid $base_alt; border-width:2px 0; padding:.25em 0; margin-bottom:0 0 1em;
  li {list-style:none; display:inline-block; padding:0 .5em; margin:0; font-size:70%; width:24%;}
  li#social_fb {width:48%}
  img {border:0; width:24px; padding-right:2px;}
  iframe {border:none; overflow:hidden; width:90px; height:21px; margin-bottom:-.67em;}
  a {color:$inverse_alt; font-weight:bold}
}
.section_front article > a {
  color:$inverse;
  &:hover {color: darken($accent, 5)}
}

.story_detail {
  .dateline { font-size: .9em; font-weight: bold; margin-top:.45em;
    &:after {
      content: '|'; 
      color: $inverse_alt;
      padding: 0 .5em;
      font-weight:normal
    }
  }
  object, video {width:100%;}
  .shirttail {color:$inverse_alt; border-top:2px solid $base_alt; margin:0; padding:.25em 0; font-size:.8em}
}




/******************** GALLERIES **********************/
#gallery_thumbs_hold {
  display:none;
  width:100%; overflow:hidden;
  height:70px; position:relative;
  li {
    height:65px; width:65px;
    margin:0 5px .5em 0;
    border: 1px solid $inverse;
    &.current {border-color:$accent; border-width:4px}
    img {border:0}
  } 
}
#gallery_slides_hold {
  figure.vertical  {text-align:center;}
  figcaption {display:none}
}
#gallery_info .sociallinks li {width:auto}


/******************** user posts and comments **********/
#comment-list {
  article { 
    clear:both; 
    position:relative; 
    margin-bottom:2em;

    header, footer {font-size:80%; }

    header {
      letter-spacing: 1px; 
      padding-left:100px;
      border-bottom: 1px solid $base_alt2; 
      color: $accent;
      margin-bottom:1em;

      time {float:right; margin-left:.5em }
      .counter {position:absolute; margin:-.5em 0 0 -110px; position:absolute }
      a[rel=author] { font-weight:bold; }
    } 
    .avatar {
      margin-left: -100px;  
      float: left; 
    }
    .post {margin:0 0 0 100px; min-height:40px;
      img.smiley { display:inline; width:auto }
    }

    .postcontrols, .postvoting {
      @include radius(5px);
      display:inline-block; width:auto;
      background:$base_alt2; border:1px inset $base_alt2;

      .reply:hover, .mod span:hover {background:$accent; color:$base_alt}
      .mod span {background: transparentize($accent_alt, .7)}

      .mod ul {
        li {border-top:1px solid $base_alt;}
        a:hover { background: $accent;} 
        li.quote a { background-image: url(/media/img/icons/iconic/gray_light/comment_fill_12x11.png) }
        li.edit  a { background-image: url(/media/img/icons/iconic/gray_light/pen_alt2_12x12.png) }
        li.delete a{ background-image: url(/media/img/icons/iconic/gray_light/trash_fill_12x12.png) }
      }
      
      a, span, > li {display:inline-block; vertical-align:top; @include radius(5px);}
      a, span { padding:0 7px; }
      a.report:hover, a.report:active {background:#600}
      a.voting:hover, a.voting:active {background:#060}
    }
    .postcontrols {float:right; list-style:none; margin:0; position:relative;
      ul {display:none; list-style:none; margin-left:-2.75em; margin-bottom:0}
      .mod {cursor:pointer; 
        li {font-size:70%;  }
        a {display:block; padding:2px 0 2px 24px; background-position: 8px center; background-repeat:no-repeat}
        span {width:.65em; overflow:hidden; white-space: nowrap; -webkit-transition:all .4s ease-in;}
         
      }
      .activated > span {width:auto}
    }
    .postvoting {margin-left:45%}
  }
}

